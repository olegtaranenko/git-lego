#!/usr/bin/env bash
declare -a globals
declare -a args="$@"

. $(dirname $0)/lib/shared_functions.sh

repoUrl=$1
repoPath=$2

# Maybe we trying to cloning inside of the existing branding repo?
# Right now it doesn't permitted
exists=$(git rev-parse --git-dir &> /dev/null)
if (( ! $? )); then
  # TODO instead of 'cloning' add repo as submodule
#  die "It's not permitted to clone inside of an existing git repo. Look in "$(dirname $0)"/Readme.MD for more information"
  exit 0
fi

cw_echo "Will clone repository $repoUrl to $repoPath"
git clone "$@"

if [[ -z "${repoPath}" ]]; then
  # no explicit destination repository given
  # take from last created directory
  for i in `ls -lat1 | grep -v ^.$`; do
    repoPath=${i};
    break;
  done
fi

cd "$repoPath"

git submodule update --recursive --init

#!/usr/bin/env bash
#plumbing helper for getting whether branch exist or not
name=$1
path=$2
toplevel=$3
sha1=$4
echo "try to checkout submodule to "  $BRANCH $name $path $toplevel $sha1
originBranch=origin/${BRANCH}
git rev-parse --no-revs ${originBranch} &> /dev/null
if [ $? -ne 0 ]; then
  echo '******* 	Submodule' $1 'has no branch' $originBranch
  echo '******* 	Use --branch | -b option to force creating new branch for every submodule'
  echo '******* 	Second argument will be used as an instruction what base branch of submodule for forking will be used'
  echo '******* 	By default develop branch is being used'
  exit 1
fi
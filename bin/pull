#!/usr/bin/env bash
declare -a globals
args="$@"

. $(dirname $0)/lib/shared_functions.sh

umbrella_bootstrap

cwRoot="${globals[$G_ROOT_DIR]}"
cwTmpSubmodules="${globals[$G_MODULES_FN]}"
gitDir="${globals[$G_MODULE_GIT_DIR]}"

#echo  "${cwRoot} ${gitDir}"
#echo "${args}"
pushd ${cwRoot} &>/dev/null
while read -r -a line; do
  path=${line[0]}
  cd "$cwRoot/$path"
  cw_echo $(pwd)
  git pull $@
done < <(cat ${cwTmpSubmodules})
cd $cwRoot
cw_echo $(pwd)
git pull $@
popd &>/dev/null
